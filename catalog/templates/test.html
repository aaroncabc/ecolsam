{% extends 'base.html' %}
{% load static %}
{% block content %}
{% csrf_token %}
<style>
    .titles {
        font-size: 48px !important;
        font-weight: bold;
        text-decoration: none;
        color: #46aa39 !important;
    }

    .category{
        font-size: 32px !important;
        font-weight: bold;
        text-decoration: none;
        color: #00000 !important;
        padding-bottom: 20px;
    }

    .info-boxes-container {
        display: flex;
        justify-content: space-between;
        padding: 20px;
    }

    .info-boxes-container info-box{
        padding: 50px;
        height: 420px;
    }

    .info-boxes-container .info-box p{
        padding: 5px;
    }

    .form-control {
        display: block;
        width: 100%;
        padding: 0.375rem 0.75rem;
        font-size: 18px;
        font-weight: 400;
        line-height: 1.5;
        color: #495057;
        background-color: #fff;
        background-clip: padding-box;
        border: 1px solid #ced4da;
        border-radius: 0.25rem;
        transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
      }

      .form-control:focus {
        color: #495057;
        background-color: #fff;
        border-color: #80bdff;
        outline: 0;
        box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
      }

      .form-control::-ms-expand {
        background-color: transparent;
        border: 0;
      }

      .form-control[disabled],
      .form-control:disabled {
        background-color: #e9ecef;
        opacity: 1;
      }

</style>
<div class="info">
    <div class="info-container">
        <div class="info-box">
            <h3 class="titles">TU HUELLA DE CARBONO</h3>
            <div>&nbsp;</div>
            <div>&nbsp;</div>
            <div class="info-boxes-container">
                <div class="info-box">
                    <h4 class="category">Agua</h4>
                    <p>¿Cuanto tiempo tardo en bañarme?
                        <div>&nbsp</div>
                        <select id="agua" class="form-control">
                            <option value="149" >Solo 5 minutos</option>
                            <option value="223">entre 5 y 10 minutos</option>
                            <option value="450">entre 10 y 20 minutos</option>
                            <option value="910">mas de 20 minutos</option>
                        </select>
                    </p>
                    <p>Cuando me cepillo los dientes, ¿dejo correr el agua?
                        <input id="agua2" type="checkbox">
                    </p>
                </div>
                <div class="info-box">
                    <h4 class="category">Forestal</h4>
                    <p>¿Cuantas libretas de 100 hojas usas en un semestre?
                        <div>&nbsp</div>
                        <select id="Fores" class="form-control">
                            <option value = "58">2 a 3</option>
                            <option value = "81">3 a 4</option>
                            <option value = "105">4 a 5</option>
                            <option value = "128">5 a 6</option>
                            <option value = "151">6 a 7</option>
                        </select>
                    </p>
                </div>
            </div>
            <div class="info-boxes-container">
                <div class="info-box">
                    <h4 class="category">Alimentos</h4>
                    <p>En un dia normal desecho:
                        <div>&nbsp</div>
                        <select id="Alimen1" class="form-control">
                            <option value = "0">Nada de mi comida</option>
                            <option value = "100">Una cuarta parte de mi comida</option>
                            <option value = "150">Un tercio de mi comida</option>
                            <option value = "200">La mitad de mi comuda</option>
                        </select>
                    </p>
                    <p>de los alimentos que consumo, ¿que cantidad es organica? (frutas,vegetales,carnes,jugos aceites)
                        <div>&nbsp</div>
                        <select id="Alimen2" class="form-control">
                            <option value = "0">Todos</option>
                            <option value = "30">Algunos</option>
                            <option value = "60">Ninguno</option>
                        </select>
                    </p>
                </div>
                <div class="info-box">
                    <h4 class="category">Compras/envios</h4>
                    <p>Tengo __ pares de zapatos
                        <div>&nbsp</div>
                        <select id="CmEn2" class="form-control">
                            <option value = "20">2 a 3</option>
                            <option value = "60">4 a 6</option>
                            <option value = "90">7 o mas</option>
                        </select>
                    </p>
                    <p>¿Compro o uso ropa de segunda mano(ropa que ha sido usada)?<input Id="CmEn3" type="checkbox"></p>
                    <p>Compro ropa de solo uso es decir ropa para una sola ocasión ya sea fiesta, salida, etc.<input Id="CmEn4" type="checkbox"></p>
                </div>

            </div>
            <div class="info-boxes-container">
                <div class="info-box">
                    <h4 class="category">Energia</h4>
                    <p>¿Tengo aire acondicionado en casa? <input id="Ener3" type="checkbox"></p>
                    <p>Apagamos las luces, los ordenadores, y la television cuando no se utilizan <input Id="Ener" type="checkbox"></p>
                    <p>.¿Utilizo más de un dispositivo electrónico al tiempo; ya sea por tareas, entretenimiento o trabajo?(televisor, teléfono, Tablet, portátil)<input Id="Ener2" type="checkbox"></p>
                    <p>La energía solar es aquella producida gracias a la luz o el calor del sol. Esta ayuda
                         al medio ambiente gracias a que es inagotable y renovable, pues se obtiene por medio
                         de paneles y espejos. Con base a lo anterior, ¿Me gustaría tener en un futuro energía
                         de panel solar?  <input id="Ener4" type="checkbox"></p>
                    <p>¿Dejas el cargador conectado después de cargar el teléfono?<input id="Ener5" type="checkbox"></p>
                </div>
                <div class="info-box">
                    <h4 class="category">Productos</h4>
                    <p>La basura que he generado hoy podria caber en:
                        <div>&nbsp</div>
                        <select id="Prds" class="form-control">
                            <option value = "20">Una caja de zapatos</option>
                            <option value = "60">Un cubo grande</option>
                            <option value = "200">Cubo de basura</option>
                            <option value = "-50">¡No he generado basura hoy!</option>
                        </select>
                    </p>
                    <p>Reutilizo materiales reciclables como: papel ( periódico, cuadernos, libros), latas (cerveza, gaseosas),
                       cristales o envases de vidrio ( gaseosas, aceites, licores), plástico (envases de gaseosas retornables,
                       botellas de jugo o agua, envases de detergentes). <input id="Prd1" type="checkbox"></p>
                    <p>Evito los productos desechables siempre que puedo: <input id ="Prd3"type="checkbox"></p>
                </div>
            </div>
            <div class="info-boxes-container">
                <div class="info-box">
                    <h4 class="category">Conocimiento</h4>
                    <p>¿Conoces páginas o sitios que hablen sobre la huella de carbono ? <input type="checkbox"></p>
                    <p>¿Sabes que es la huella de carbono y su uso?<input type="checkbox"></p>
                    <p>¿Conocés las consecuencias de NO aplicar la huella de carbono?<input type="checkbox"></p>
                </div>
                <div class="info-box">
                    <h4 class="category">Transporte</h4>
                    <p>¿Que tipo de transporte utilizas mas seguido
                        <div>&nbsp</div>
                        <select id="trns" class="form-control">
                            <option value = "100">Bus</option>
                            <option value = "200">Auto</option>
                            <option value = "120">Moto</option>
                            <option value = "0" >Bicicleta</option>
                        </select>
                    </p>
                </div>

            </div>
            <button class="form-control" onclick="calculateScore()">Calcular mi huella</button>
            <div>&nbsp</div>
            <div>&nbsp</div>
            <button id='save' class="form-control" >Haz parte de la huella COLSAM</button>
            <div>&nbsp</div>
            <h3 id="Ptotal">Puntaje total: </h3>
        </div>
    </div>
</div>
<script>
    const Button = document.getElementById('save');
    Button.disabled= true;
    let totalScore=0
    let href = "{% url 'send' total_score=0 %}";
    // Function to calculate the total score and update the button
    function calculateScore() {
      // Get the values from the select elements
      const agua = parseInt(document.getElementById('agua').value);
      const trns = parseInt(document.getElementById('trns').value);
      const trans2 = parseInt(document.getElementById('trans2').value);
      const energia = parseInt(document.getElementById('Energia').value);
      const energia2 = parseInt(document.getElementById('Energia2').value);
      const alimen1 = parseInt(document.getElementById('Alimen1').value);
      const alimen2 = parseInt(document.getElementById('Alimen2').value);
      const fores = parseInt(document.getElementById('Fores').value);
      const cmEn2 = parseInt(document.getElementById('CmEn2').value);
      const prds = parseInt(document.getElementById('Prds').value);
      const prds2 = parseInt(document.getElementById('Prds2').value);

      // Get the status of the checkboxes
      const agua2Checkbox = document.getElementById('agua2').checked;
      const enerCheckbox = document.getElementById('Ener').checked;
      const ener2Checkbox = document.getElementById('Ener2').checked;
      const ener3Checkbox = document.getElementById('Ener3').checked;
      const ener4Checkbox = document.getElementById('Ener4').checked;
      const ener5Checkbox = document.getElementById('Ener5').checked;
      const prd1Checkbox = document.getElementById('Prd1').checked;
      const prd3Checkbox = document.getElementById('Prd3').checked;
      const prd6Checkbox = document.getElementById('Prd6').checked;
      const cmEn3Checkbox = document.getElementById('CmEn3').checked;
      const cmEn4Checkbox = document.getElementById('CmEn4').checked;

      // Calculate the total score
      totalScore = trns+ trans2*trns*0.2 + agua + energia + energia2 + alimen1 + alimen2 + fores + cmEn1 + cmEn2 + prds + prds2;

      if (agua2Checkbox) {
        totalScore += 40;
      }

      if (!enerCheckbox) {
        totalScore += 50;
      }

      if (ener2Checkbox) {
        totalScore += 50;
      }

      if (ener3Checkbox) {
        totalScore += 50;
      }

      if (ener4Checkbox) {
        totalScore += -20;
      }

      if (ener5Checkbox) {
        totalScore += 30;
      }

      if (prd1Checkbox) {
        totalScore += -20;
      }else{
        totalScore += 40;
      }

      if (prd2Checkbox) {
        totalScore += -20;
      }else{
        totalScore += 40;
      }

      if (prd3Checkbox) {
        totalScore += -10;
      }else{
        totalScore += 60;
      }

      if (prd4Checkbox) {
        totalScore += -10;
      }

      if (prd5Checkbox) {
        totalScore += -10;
      }

      if (prd6Checkbox) {
        totalScore += -10;
      }

      if (cmEn3Checkbox) {
        totalScore += -40;
      }else{
        totalScore += 60;
      }

      if (cmEn4Checkbox) {
        totalScore += 40;
        }

      const text = document.getElementById('Ptotal');
      text.textContent = 'Puntaje total: ' + totalScore;
      Button.disabled = false;
      href = href.replace('0', totalScore)
      console.log(href)
    }

    function submitScore() {
        const submitButton = document.getElementById('save');
        window.location.href = href;
    }
    document.getElementById('save').addEventListener('click', submitScore);
</script>
{% endblock %}
